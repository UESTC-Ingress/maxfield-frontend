(function(t){function e(e){for(var n,i,s=e[0],c=e[1],l=e[2],d=0,v=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&v.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(v.length)v.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},2:function(t,e){},"3cb1":function(t){t.exports=JSON.parse('{"test":{"name":"测试节点","cores":1,"endpoint":"http://127.0.0.1:1331"},"Alpha-1":{"name":"Alpha-1","cores":2,"endpoint":"https://worker-1-alpha-stevecharlesyang.cloud.okteto.net"},"Alpha-2":{"name":"Alpha-2","cores":2,"endpoint":"https://worker-2-alpha-stevecharlesyang.cloud.okteto.net"},"Beta-1":{"name":"Beta-1","cores":2,"endpoint":"https://worker-1-beta-stevecharlesyang.cloud.okteto.net"},"Beta-2":{"name":"Beta-2","cores":2,"endpoint":"https://worker-2-beta-stevecharlesyang.cloud.okteto.net"},"Gamma-1":{"name":"Gamma-1","cores":2,"endpoint":"https://worker-1-gamma-mrpeterjin.cloud.okteto.net"},"Gamma-2":{"name":"Gamma-2","cores":2,"endpoint":"https://worker-2-gamma-mrpeterjin.cloud.okteto.net"},"Delta-1":{"name":"Delta-1","cores":2,"endpoint":"https://worker-1-delta-mrpeterjin.cloud.okteto.net"},"Delta-2":{"name":"Delta-2","cores":2,"endpoint":"https://worker-2-delta-mrpeterjin.cloud.okteto.net"}}')},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("NavDrawer"),a("NavBar"),a("v-content",[a("router-view"),a("NewUserPrompt")],1)],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){return e.stopPropagation(),t.toggleDrawer(e)}}}),a("v-toolbar-title",[t._v("MaxField NIA-CN")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:t.toggleDark}},[a("v-icon",[t._v("mdi-invert-colors")])],1)],1)},s=[],c={methods:{toggleDrawer:function(){this.$store.commit("toggleDrawer")},toggleDark:function(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark,localStorage.dark=this.$vuetify.theme.dark}}},l=c,u=a("2877"),d=a("6544"),v=a.n(d),p=a("40dc"),m=a("5bc1"),f=a("8336"),h=a("132d"),b=a("2fa4"),g=a("2a7f"),_=Object(u["a"])(l,i,s,!1,null,null,null),k=_.exports;v()(_,{VAppBar:p["a"],VAppBarNavIcon:m["a"],VBtn:f["a"],VIcon:h["a"],VSpacer:b["a"],VToolbarTitle:g["a"]});var x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{app:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-footer",[a("span",{staticClass:"font-weight-light"},[t._v("NIACNET 高性能计算中心")]),a("v-spacer"),a("AboutView")],1)]},proxy:!0}]),model:{value:t.drawerState,callback:function(e){t.drawerState=e},expression:"drawerState"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[t._v(" MaxField 计算系统 ")]),a("v-list-item-subtitle",[t._v(" Powered by NIACNET ")])],1)],1),a("v-divider"),a("v-list",{attrs:{nav:""}},[a("v-list-item",{attrs:{to:"/"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("主页")])],1)],1),a("v-list-item",{attrs:{to:"/submit"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-application")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("提交计算")])],1)],1),a("v-list-item",{attrs:{to:"/list"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-clipboard-list-outline")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("查询")])],1)],1),a("v-list-item",{attrs:{to:"/stats"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-information")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("统计 (未完工)")])],1)],1)],1)],1)},w=[],V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""}},n),[a("v-icon",[t._v("mdi-information-outline")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-text",[a("v-card-title",{staticClass:"headline lighten-2",attrs:{"primary-title":""}},[t._v(" Max Field ")]),a("v-card-subtitle",[t._v(" Niantic CN Version Frontend v0.65 ")]),t._v(" 本前端程序由 NIACNET 高性能实验室维护，使用 GPLv3 方式授权。 ")],1),a("v-card-text",[a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("用户使用条款")]),a("v-expansion-panel-content",[t._v(" 1. 想好再提交，乱提交 ban IP"),a("br"),t._v(" 2. 对实际操作中出现的状况不负责"),a("br"),t._v(" 3. 本站开源，欢迎 PR ")])],1),a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("隐私权政策")]),a("v-expansion-panel-content",[t._v(" 1. 维护者懒得去看您提交了啥"),a("br"),t._v(" 2. 任务 ID 存在浏览器本地"),a("br"),t._v(" 3. 运行结果一天之后自动删库 ")])],1),a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("鸣谢")]),a("v-expansion-panel-content",[t._v(" 1. "),a("b",[t._v("Niantic. Inc.")]),t._v("，因为本站给他们家的产品服务的"),a("br"),t._v(" 2. "),a("b",[t._v("Maxfield 原维护者")]),t._v("，因为本站直接调了他们的库来用"),a("br"),t._v(" 3. "),a("b",[t._v("NIACNET")]),t._v("，因为它给本站白嫖了计算资源 ")])],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.open_link("https://gitlab.com/UESTC-Ingress/maxfield-frontend")}}},n),[a("v-icon",[t._v("mdi-xml")])],1)]}}])},[a("span",[t._v("前端代码")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.open_link("https://gitlab.com/UESTC-Ingress/maxfield-api")}}},n),[a("v-icon",[t._v("mdi-code-braces")])],1)]}}])},[a("span",[t._v("API 代码")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.open_link("https://gitlab.com/UESTC-Ingress/maxfield-worker")}}},n),[a("v-icon",[t._v("mdi-code-brackets")])],1)]}}])},[a("span",[t._v("worker 代码")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.open_link("https://hub.docker.com/repository/docker/yukarichiba/maxfield-worker")}}},n),[a("v-icon",[t._v("mdi-docker")])],1)]}}])},[a("span",[t._v("Docker worker 代码")])]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" 关闭 ")])],1)],1)],1)},y=[],D={computed:{dialog:{get:function(){return this.$store.state.aboutShow},set:function(t){return this.$store.commit("updateAbout",t)}}},methods:{open_link:function(t){window.location=t}}},C=D,S=a("b0af"),I=a("99d9"),P=a("169a"),T=a("ce7e"),A=a("cd55"),$=a("49e2"),j=a("c865"),O=a("0393"),N=a("3a2f"),E=Object(u["a"])(C,V,y,!1,null,null,null),F=E.exports;v()(E,{VBtn:f["a"],VCard:S["a"],VCardActions:I["a"],VCardSubtitle:I["b"],VCardText:I["c"],VCardTitle:I["d"],VDialog:P["a"],VDivider:T["a"],VExpansionPanel:A["a"],VExpansionPanelContent:$["a"],VExpansionPanelHeader:j["a"],VExpansionPanels:O["a"],VIcon:h["a"],VSpacer:b["a"],VTooltip:N["a"]});var R={components:{AboutView:F},computed:{drawerState:{get:function(){return this.$store.state.drawerShow},set:function(t){return this.$store.commit("updateDrawer",t)}}}},B=R,L=a("553a"),M=a("8860"),U=a("da13"),q=a("5d23"),K=a("34c3"),G=a("f774"),J=Object(u["a"])(B,x,w,!1,null,null,null),z=J.exports;v()(J,{VDivider:T["a"],VFooter:L["a"],VIcon:h["a"],VList:M["a"],VListItem:U["a"],VListItemContent:q["a"],VListItemIcon:K["a"],VListItemSubtitle:q["b"],VListItemTitle:q["c"],VNavigationDrawer:G["a"],VSpacer:b["a"]});var H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("输入您的ID")]),a("v-card-text",[t._v(" 为了区别不同的任务，您需要一个ID，它可以是您的Agent ID，也可以是其他的任意字符 "),a("v-text-field",{attrs:{label:"ID"},model:{value:t.input_id,callback:function(e){t.input_id=e},expression:"input_id"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.randID}},[t._v(" 随机ID ")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.saveAndClose}},[t._v(" 保存 ")])],1)],1)],1)},X=[],Q=(a("d3b7"),a("25f0"),{data:function(){return{input_id:""}},methods:{randID:function(){this.input_id=Math.random().toString(36).substring(7)},saveAndClose:function(){localStorage.userID=this.input_id,this.$store.commit("updateUserID",this.input_id),this.dialog=!1}},computed:{dialog:{get:function(){return this.$store.state.newUserPrompt},set:function(t){return this.$store.commit("updateNewUserPrompt",t)}}}}),W=Q,Z=a("8654"),Y=Object(u["a"])(W,H,X,!1,null,null,null),tt=Y.exports;v()(Y,{VBtn:f["a"],VCard:S["a"],VCardActions:I["a"],VCardText:I["c"],VCardTitle:I["d"],VDialog:P["a"],VSpacer:b["a"],VTextField:Z["a"]});var et={name:"App",components:{NavDrawer:z,NavBar:k,NewUserPrompt:tt},data:function(){return{}},mounted:function(){localStorage.colortheme&&(this.$vuetify.theme.themes.light.primary=localStorage.colortheme,this.$vuetify.theme.themes.dark.primary=localStorage.colortheme),"undefined"!=typeof localStorage.dark&&(this.$vuetify.theme.dark=localStorage.dark)}},at=et,nt=a("7496"),rt=a("a75b"),ot=Object(u["a"])(at,r,o,!1,null,null,null),it=ot.exports;v()(ot,{VApp:nt["a"],VContent:rt["a"]});var st=a("9483");Object(st["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var ct=a("8c4f"),lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"mb-6"},[a("v-card-title",[t._v("Max Field by NIA-CN")]),a("v-card-subtitle",[t._v("Insider Preview")]),a("v-card-text",[a("h3",[t._v("什么是 MaxField")]),a("p",[t._v(" Ingress MaxField 是一个 Ingress 链接和部署策略生成器。 给定 Portal 列表，MaxField 将确定链接 Portal 以创建最多 Field 的同时获得最多 AP 的最佳顺序。 该网站的后端是由 J.Peter Baker 编写的 Python 程序，tvwenger完全重写了该程序，NIA-CN 高性能实验室采用了后者的程序。 ")]),a("p",[t._v(" Ingress Maxfield 不违反 Ingress / Niantic 服务条款。该应用程序仅使用从用户从 Intel 网站复制的 Portal URL 中提取的 Portal 位置来生成链接和部署计划。 ")]),a("p",[t._v(" 注意: 每次提交相同的 Portal 列表时，您可能都会获得不同的计划。 ")]),a("p",[t._v(" 本站全部代码均使用GPLv3协议授权。 ")])])],1)],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"mb-6"},[a("v-card-actions",[a("v-row",{staticClass:"ml-4 mr-4"},[a("v-col",[a("v-btn",{attrs:{large:"",outlined:"",to:"/submit"}},[a("v-icon",[t._v("mdi-file-document-edit-outline")]),t._v("提交请求")],1)],1),a("v-col",[a("v-btn",{attrs:{large:"",outlined:"",to:"/list"}},[a("v-icon",[t._v("mdi-clipboard-list-outline")]),t._v("查看列表")],1)],1),a("v-col",[a("v-btn",{attrs:{large:"",outlined:""},on:{click:function(e){return t.$store.commit("updateAbout",!0)}}},[a("v-icon",[t._v("mdi-information")]),t._v("关于本站")],1)],1)],1)],1)],1),a("QueueInfo")],1)],1)],1)},ut=[],dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-6",attrs:{loading:t.loading}},[a("v-card-title",[t._v("队列信息")]),a("v-row",{staticClass:"ml-4 mr-4"},[a("v-col",[a("v-card-subtitle",[t._v("队列中任务")]),t.loading?a("v-card-text",[a("v-progress-circular",{attrs:{color:"primary",indeterminate:""}})],1):a("v-card-title",[t._v(t._s(t.queued))])],1),a("v-col",[a("v-card-subtitle",[t._v("计算节点")]),t.loading?a("v-card-text",[a("v-progress-circular",{attrs:{color:"primary",indeterminate:""}})],1):a("v-card-title",[t._v(t._s(t.workers))])],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(e){return e.stopPropagation(),t.refreshData(e)}}},[t._v("刷新")])],1)],1)},vt=[],pt={data:function(){return{queued:0,workers:0,loading:!1}},methods:{refreshData:function(){var t=this;this.loading=!0,this.axios.get("https://maxfield-api-dev-stevecharlesyang.cloud.okteto.net/queue").then((function(e){1==e.data.error||(t.queued=e.data.inqueue,t.workers=e.data.worker),t.loading=!1}))}},mounted:function(){this.refreshData()}},mt=pt,ft=a("62ad"),ht=a("490a"),bt=a("0fd9"),gt=Object(u["a"])(mt,dt,vt,!1,null,null,null),_t=gt.exports;v()(gt,{VBtn:f["a"],VCard:S["a"],VCardActions:I["a"],VCardSubtitle:I["b"],VCardText:I["c"],VCardTitle:I["d"],VCol:ft["a"],VDivider:T["a"],VProgressCircular:ht["a"],VRow:bt["a"]});var kt={components:{QueueInfo:_t}},xt=kt,wt=a("a523"),Vt=Object(u["a"])(xt,lt,ut,!1,null,null,null),yt=Vt.exports;v()(Vt,{VBtn:f["a"],VCard:S["a"],VCardActions:I["a"],VCardSubtitle:I["b"],VCardText:I["c"],VCardTitle:I["d"],VCol:ft["a"],VContainer:wt["a"],VIcon:h["a"],VRow:bt["a"]});var Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-card",[a("v-card-title",[t._v("提交 MaxField 请求")]),a("v-divider"),a("v-card-text",[a("v-form",{ref:"form"},[a("v-subheader",[t._v("MaxField 信息 "),a("v-dialog",{attrs:{"max-width":"560"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-icon",t._g({attrs:{small:""}},n),[t._v("mdi-help-circle")])]}}]),model:{value:t.helper_portals,callback:function(e){t.helper_portals=e},expression:"helper_portals"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("如何填写 Portal 列表？")]),a("v-card-text",[a("p",[t._v(" 1. 在 Intel 中找到 Portal"),a("br"),t._v(" 2. 点击 Portal，一个信息界面将会出现"),a("br"),t._v(" 3. 点击 Intel 右上角的 Link 按钮"),a("br"),t._v(" 4. 复制它的链接，将其粘贴到列表内"),a("br")]),a("p",[t._v(" 格式为: "),a("code",[t._v("Portal 名; Intel 链接")]),t._v(" "),a("br"),t._v(" 亦支持: "),a("code",[t._v("Portal 名; Intel 链接; Key数量; SBUL(指使用SBUL)")])])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.helper_portals=!1}}},[t._v("关闭")])],1)],1)],1)],1),a("v-textarea",{attrs:{"auto-grow":"",outlined:"",name:"input-7-4",label:"Portal 列表",rules:[function(t){return!!t||"您必须输入内容！"},function(t){return t&&t.split(/\r\n|\r|\n/).length<50||"Portal 数量限制在100个"},function(t){return/^([^;]*; https:\/\/intel.ingress.com\/intel\?ll=-?[0-9]*\.[0-9]*,-?[0-9]*\.[0-9]*&z=[0-9]*&pll=-?[0-9]*\.[0-9]*,-?[0-9]*\.[0-9]*(;[0-9]{1,})?(;SBUL)?\n?){1,101}$/g.test(t)||"输入内容不合法"}]},model:{value:t.formData.portals,callback:function(e){t.$set(t.formData,"portals",e)},expression:"formData.portals"}}),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{outlined:"",type:"number",label:"参与的Agent数量",required:""},model:{value:t.formData.agents,callback:function(e){t.$set(t.formData,"agents",e)},expression:"formData.agents"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-radio-group",{attrs:{rules:[function(t){return!!t||"您必须选择一项！"}],row:""},model:{value:t.formData.faction,callback:function(e){t.$set(t.formData,"faction",e)},expression:"formData.faction"}},[a("v-radio",{attrs:{label:"启蒙军/ENL",color:"green",value:"enl"}}),a("v-radio",{attrs:{label:"反抗军/RES",color:"blue",value:"res"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-checkbox",{attrs:{label:"是否使用 Google Maps? (暂不可用)",disabled:""},model:{value:t.formData.googlemap,callback:function(e){t.$set(t.formData,"googlemap",e)},expression:"formData.googlemap"}})],1)],1),a("v-subheader",[t._v("通知信息")]),a("v-text-field",{attrs:{outlined:"",disabled:"",label:"邮箱（可选）(暂不可用)"},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),a("v-subheader",[t._v("条款相关")]),a("v-checkbox",{attrs:{rules:[function(t){return!!t||"您必须同意此项！"}],label:"是否接受 MaxField NIA-CN 隐私政策和用户使用条款?（咕咕咕）",required:""}}),a("v-checkbox",{staticStyle:{"pointer-events":"none"},attrs:{rules:[function(t){return!!t||"验证未通过！"}],label:"人机交互验证",required:""},model:{value:t.formData["g-recaptcha-response"],callback:function(e){t.$set(t.formData,"g-recaptcha-response",e)},expression:"formData['g-recaptcha-response']"}}),t.formData["g-recaptcha-response"]?t._e():a("v-btn",{on:{click:function(e){return e.stopPropagation(),t.recaptcha(e)}}},[t._v("请求人机交互验证")])],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{large:"",disabled:t.loading,color:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitForm(e)}}},[a("v-icon",[t._v("mdi-application")]),t._v(" 提交计算 ")],1)],1)],1),a("SubmitSucPrompt",{attrs:{task:t.task}})],1)},Ct=[],St=(a("ac1f"),a("5319"),a("96cf"),a("1da1")),It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline lighten-2",attrs:{"primary-title":""}},[t._v(" 提交成功 ")]),a("v-card-subtitle",[t._v(" 您的提交已经被放置在队列中。 ")]),a("v-card-text",[t._v(" 您的任务编号为: "),a("code",[t._v(t._s(t.task.taskid))]),a("br"),t._v(" 它将保存在您的浏览器缓存中，您可以随时"),a("router-link",{attrs:{to:"/list"},on:{click:function(e){t.dialog=!1}}},[t._v("查看进度")]),t._v("。 "),a("br"),t._v(" 队列前方有"),a("b",[t._v(t._s(t.task.submitinqueue))]),t._v("个任务。 ")],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" 关闭 ")])],1)],1)],1)},Pt=[],Tt={props:["task"],computed:{dialog:{get:function(){return this.$store.state.submitSucPrompt},set:function(t){return this.$store.commit("updateSubmitSucPrompt",t)}}}},At=Tt,$t=Object(u["a"])(At,It,Pt,!1,null,null,null),jt=$t.exports;v()($t,{VBtn:f["a"],VCard:S["a"],VCardActions:I["a"],VCardSubtitle:I["b"],VCardText:I["c"],VCardTitle:I["d"],VDialog:P["a"],VDivider:T["a"]});var Ot={init:function(){return Object(St["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var e=window.indexedDB.open("maxfield",2);e.onsuccess=function(e){t(e.target.result)},e.onupgradeneeded=function(t){var e=t.target.result;e.createObjectStore("tasks",{keyPath:"taskid"})}})));case 1:case"end":return t.stop()}}),t)})))()},insert_task:function(t){var e=this;return Object(St["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.init();case 2:n=a.sent,n.transaction(["tasks"],"readwrite").objectStore("tasks").add({taskid:t,created:new Date});case 4:case"end":return a.stop()}}),a)})))()},get_task:function(){var t=this;return Object(St["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:return a=e.sent,e.abrupt("return",new Promise((function(t){var e=a.transaction(["tasks"],"readonly");e.oncomplete=function(){t(r)};var n=e.objectStore("tasks"),r=[];n.openCursor().onsuccess=function(t){var e=t.target.result;e&&(r.push(e.value),e.continue())}})));case 4:case"end":return e.stop()}}),e)})))()},del_task:function(t){var e=this;return Object(St["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.init();case 2:return n=a.sent,a.abrupt("return",new Promise((function(e){var a=n.transaction(["tasks"],"readwrite");a.oncomplete=function(){e()};var r=a.objectStore("tasks");r.delete(t)})));case 4:case"end":return a.stop()}}),a)})))()}},Nt=Ot,Et={components:{SubmitSucPrompt:jt},data:function(){return{formData:{agents:1,"g-recaptcha-response":null},loading:!1,helper_portals:!1,task:{taskid:null,submitinqueue:0}}},mounted:function(){this.recaptcha()},methods:{recaptcha:function(){var t=this;return Object(St["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$recaptchaLoaded();case 2:return e.next=4,t.$recaptcha("login");case 4:t.formData["g-recaptcha-response"]=e.sent;case 5:case"end":return e.stop()}}),e)})))()},initializeForm:function(){this.formData={agents:1,"g-recaptcha-response":null}},submitForm:function(){var t=this;this.$refs.form.validate()&&(this.formData.portals=this.formData.portals.replace(/,(?=.*;)/g,"."),this.loading=!0,this.axios.post("https://maxfield-api-dev-stevecharlesyang.cloud.okteto.net/submit",this.formData).then((function(e){t.loading=!1,1==e.data.error?"CAPTCHA"==e.data.desc&&(t.formData["g-recaptcha-response"]=null):(t.task.taskid=e.data.submitid,t.task.submitinqueue=e.data.inqueue,t.initializeForm(),t.$refs.form.resetValidation(),t.$store.commit("updateSubmitSucPrompt",!0),Nt.insert_task(e.data.submitid))})))}}},Ft=Et,Rt=a("ac7c"),Bt=a("4bd4"),Lt=a("67b6"),Mt=a("43a6"),Ut=a("e0c7"),qt=a("a844"),Kt=Object(u["a"])(Ft,Dt,Ct,!1,null,null,null),Gt=Kt.exports;v()(Kt,{VBtn:f["a"],VCard:S["a"],VCardActions:I["a"],VCardText:I["c"],VCardTitle:I["d"],VCheckbox:Rt["a"],VCol:ft["a"],VContainer:wt["a"],VDialog:P["a"],VDivider:T["a"],VForm:Bt["a"],VIcon:h["a"],VRadio:Lt["a"],VRadioGroup:Mt["a"],VRow:bt["a"],VSpacer:b["a"],VSubheader:Ut["a"],VTextField:Z["a"],VTextarea:qt["a"]});var Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.tasklist,"items-per-page":5},scopedSlots:t._u([{key:"item.created",fn:function(e){var a=e.item;return[t._v(" "+t._s(["orange","red"].includes(t.status2descr(a.status).color)?"--":t.plusoneday(a.created).toLocaleString())+" ")]}},{key:"item.status",fn:function(e){var n=e.item;return[a("v-chip",{attrs:{color:t.status2descr(n.status).color,dark:""}},[t._v(t._s(t.status2descr(n.status).descr))])]}},{key:"item.action",fn:function(e){var n=e.item;return[t.status2descr(n.status).selectable?a("v-btn",{attrs:{icon:"",to:"/info/"+n.status+"/"+n.taskid}},[a("v-icon",[t._v("mdi-information-outline")])],1):t._e(),a("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.deltask(n.taskid)}}},[a("v-icon",[t._v("mdi-delete")])],1)]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("计算任务列表")]),a("v-spacer"),a("v-btn",{on:{click:t.gettasks}},[a("v-icon",[t._v("mdi-refresh")]),t._v("刷新")],1)],1)]},proxy:!0}])})],1)},zt=[],Ht=(a("4160"),a("c975"),a("d81d"),a("a434"),a("b0c0"),a("159b"),a("3cb1")),Xt={data:function(){return{loading:!0,headers:[{text:"任务 ID",sortable:!1,value:"taskid"},{text:"失效时间",value:"created"},{text:"状态",value:"status"},{text:"操作",sortable:!1,value:"action"}],tasklist:[]}},methods:{plusoneday:function(t){return t.setDate(t.getDate()+1),t},gettasks:function(){var t=Object(St["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Nt.get_task();case 2:e=t.sent,0!=e.length?(e=e.reverse(),a=[],e.forEach((function(t){(new Date-t.created.getTime())/1e3>86400?t.status="EXPIRED":a.push(t)})),a.length?this.axios.post("https://maxfield-api-dev-stevecharlesyang.cloud.okteto.net/status",{tasks:a.map((function(t){return t.taskid}))}).then((function(t){for(var r=0;r<t.data.data.length;r++)e[e.indexOf(a[r])].status=t.data.data[r],null!=t.data.expire[r]&&(e[e.indexOf(a[r])].created=new Date(parseInt(t.data.expire[r])));n.tasklist=e,n.loading=!1})):(this.tasklist=e,this.loading=!1)):this.loading=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deltask:function(t){Nt.del_task(t),this.tasklist.splice(this.tasklist.map((function(t){return t.taskid})).indexOf(t),1)},status2descr:function(t){switch(t){case"FAILED":return{color:"red",selectable:!1,descr:"失败"};case"EXPIRED":return{color:"grey",selectable:!1,descr:"过期"};case null:return{color:"orange",selectable:!1,descr:"等待中"};default:return{color:"green",selectable:!0,descr:"完成："+(Ht[t]?Ht[t].name:"未知节点")}}}},mounted:function(){this.gettasks()}},Qt=Xt,Wt=a("cc20"),Zt=a("8fea"),Yt=a("71d9"),te=Object(u["a"])(Qt,Jt,zt,!1,null,null,null),ee=te.exports;v()(te,{VBtn:f["a"],VChip:Wt["a"],VContainer:wt["a"],VDataTable:Zt["a"],VIcon:h["a"],VSpacer:b["a"],VToolbar:Yt["a"],VToolbarTitle:g["a"]});var ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-card",[a("v-toolbar",{attrs:{flat:"",color:"primary",dark:""}},[a("v-toolbar-title",[t._v("任务 ID "+t._s(t.$route.params.taskid))]),t.taskinfo?a("v-subheader",[t._v("Agents: "+t._s(t.taskinfo.agents))]):t._e()],1),a("v-tabs",{attrs:{vertical:t.vert,"background-color":"primary"}},[a("v-tab",[a("v-icon",{attrs:{left:""}},[t._v("mdi-key")]),t._v(" Key ")],1),a("v-tab",[a("v-icon",{attrs:{left:""}},[t._v("mdi-clipboard-text")]),t._v(" 分配 ")],1),a("v-tab",[a("v-icon",{attrs:{left:""}},[t._v("mdi-map")]),t._v(" 地图 ")],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("Key",{attrs:{taskinfo:this.taskinfo}})],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("Assign",{attrs:{taskinfo:this.taskinfo}})],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("Map",{attrs:{taskinfo:this.taskinfo}})],1)],1)],1)],1)],1)},ne=[],re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-tabs",{attrs:{grow:"","show-arrows":!1,centered:""}},[a("v-tab",[a("v-icon",[t._v("mdi-key")]),t._v(" Key获取 ")],1),a("v-tab",[a("v-icon",[t._v("mdi-map-marker")]),t._v(" Portal占领 ")],1),a("v-tab-item",[a("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.key_list,"items-per-page":10}})],1),a("v-tab-item",[a("v-card-text",[a("pre",[t._v("      "+t._s(t.capture_data)+"\n      ")])])],1)],1)],1)},oe=[],ie=(a("498a"),a("50da"));function se(t){for(var e=[],a=ie["parse"](t),n=1;n<a.length;n++)if(a[n].length>1){for(var r={},o=0;o<a[0].length;o++){var i=a[0][o];r[i.trim()]=a[n][o].trim()}e.push(r)}return e}var ce=se,le={props:["taskinfo"],data:function(){return{key_list:[],loading:!0,capture_data:"",headers:[{text:"Agent",value:"Agent"},{text:"需要Key",value:"KeysNeeded"},{text:"Portal",value:"Portal Name"}]}},methods:{updateData:function(){var t=this;this.axios.get(this.taskinfo.endpoint+"/agent_key_preparation.csv").then((function(e){t.key_list=ce(e.data),t.loading=!1})),this.axios.get(this.taskinfo.endpoint+"/ownership_preparation.txt").then((function(e){t.capture_data=e.data}))}},watch:{taskinfo:{handler:function(){null!=this.taskinfo&&this.updateData()},immediate:!0,deep:!0}}},ue=le,de=a("71a3"),ve=a("c671"),pe=a("fe57"),me=Object(u["a"])(ue,re,oe,!1,null,null,null),fe=me.exports;v()(me,{VCardText:I["c"],VDataTable:Zt["a"],VIcon:h["a"],VTab:de["a"],VTabItem:ve["a"],VTabs:pe["a"]});var he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.assignlist,"items-per-page":10}})},be=[],ge={data:function(){return{assignlist:[],headers:[{text:"Link ID",value:"LinkNum"},{text:"Agent",value:"Agent"},{text:"从",value:"OriginName"},{text:"至",value:"DestinationName"}]}},props:["taskinfo"],methods:{updateData:function(){var t=this;this.axios.get(this.taskinfo.endpoint+"/agent_assignments.csv").then((function(e){t.assignlist=ce(e.data)}))}},watch:{taskinfo:{handler:function(){null!=this.taskinfo&&this.updateData()},immediate:!0,deep:!0}}},_e=ge,ke=Object(u["a"])(_e,he,be,!1,null,null,null),xe=ke.exports;v()(ke,{VDataTable:Zt["a"]});var we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-tabs",{attrs:{grow:"","show-arrows":!1,centered:""},model:{value:t.toggle_map,callback:function(e){t.toggle_map=e},expression:"toggle_map"}},[a("v-tab",[a("v-icon",[t._v("mdi-map-marker")]),t._v(" Portal地图 ")],1),a("v-tab",[a("v-icon",[t._v("mdi-link")]),t._v(" Link地图 ")],1),a("v-tab",[a("v-icon",[t._v("mdi-animation-play")]),t._v(" Gif规划 ")],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-img",{attrs:{contain:"","max-width":"60vw",src:t.taskinfo.endpoint+"/"+t.filenames[t.toggle_map]},scopedSlots:t._u([{key:"placeholder",fn:function(){return[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}])})],1)],1)},Ve=[],ye={data:function(){return{toggle_map:0,filenames:["portal_map.png","link_map.png","plan_movie.gif"]}},props:["taskinfo"]},De=ye,Ce=a("adda"),Se=Object(u["a"])(De,we,Ve,!1,null,null,null),Ie=Se.exports;v()(Se,{VIcon:h["a"],VImg:Ce["a"],VProgressCircular:ht["a"],VRow:bt["a"],VTab:de["a"],VTabs:pe["a"]});var Pe={components:{Key:fe,Assign:xe,Map:Ie},data:function(){return{taskinfo:null}},computed:{vert:function(){return window.innerWidth>600}},methods:{getInfo:function(){var t=this;this.axios.get(Ht[this.$route.params.workerid].endpoint+"/"+this.$route.params.taskid+"/info.json").then((function(e){t.taskinfo=e.data,t.taskinfo.endpoint=Ht[t.$route.params.workerid].endpoint+"/"+t.$route.params.taskid}))}},mounted:function(){this.getInfo()}},Te=Pe,Ae=Object(u["a"])(Te,ae,ne,!1,null,null,null),$e=Ae.exports;v()(Ae,{VCard:S["a"],VContainer:wt["a"],VIcon:h["a"],VSubheader:Ut["a"],VTab:de["a"],VTabItem:ve["a"],VTabs:pe["a"],VToolbar:Yt["a"],VToolbarTitle:g["a"]});var je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-tabs",{attrs:{grow:"","show-arrows":!1,centered:""}},[a("v-tab",[a("v-icon",[t._v("mdi-graph")]),t._v(" 计算节点 ")],1),a("v-tab",[a("v-icon",[t._v("mdi-post-outline")]),t._v(" 统计信息 ")],1),a("v-tab-item",[a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("节点名称")]),a("th",{staticClass:"text-left"},[t._v("核心数量")]),a("th",{staticClass:"text-left"},[t._v("节点状态")])])]),a("tbody",t._l(t.nodearray,(function(e){return a("tr",{key:e[0]},[a("td",[t._v(t._s(e[1].name))]),a("td",[t._v(t._s(e[1].cores))]),a("td",[a("v-chip",{class:void 0!=e[1].status?e[1].status?"success":"red":"grey"},[t._v(t._s(void 0!=e[1].status?e[1].status?"正常":"丢失":"测试中"))])],1)])})),0)])],1),a("v-tab-item")],1)],1)},Oe=[],Ne=(a("4fad"),{data:function(){return{nodelist:Ht,nodearray:[]}},methods:{refreshData:function(){var t=this;Object.entries(this.nodelist).forEach((function(e){t.axios.get(e[1].endpoint).then((function(a){200===a.status?t.nodelist[e[0]].status=!0:t.nodelist[e[0]].status=!1})).catch((function(){t.nodelist[e[0]].status=!1})).finally((function(){t.nodearray=Object.entries(t.nodelist)}))}))}},mounted:function(){this.refreshData()}}),Ee=Ne,Fe=a("1f4f"),Re=Object(u["a"])(Ee,je,Oe,!1,null,null,null),Be=Re.exports;v()(Re,{VChip:Wt["a"],VContainer:wt["a"],VIcon:h["a"],VSimpleTable:Fe["a"],VTab:de["a"],VTabItem:ve["a"],VTabs:pe["a"]}),n["a"].use(ct["a"]);var Le=[{path:"/",name:"Home",component:yt},{path:"/submit",name:"Submit",component:Gt},{path:"/list",name:"List",component:ee},{path:"/info/:workerid/:taskid",name:"Info",component:$e},{path:"/stats",name:"Stats",component:Be}],Me=new ct["a"]({mode:"history",base:"/",routes:Le}),Ue=Me,qe=a("2f62");n["a"].use(qe["a"]);var Ke=new qe["a"].Store({state:{drawerShow:!1,aboutShow:!1,newUserPrompt:!1,submitSucPrompt:!1,userID:""},mutations:{toggleDrawer:function(t){t.drawerShow=!t.drawerShow},updateDrawer:function(t,e){t.drawerShow=e},updateAbout:function(t,e){t.aboutShow=e},updateNewUserPrompt:function(t,e){t.newUserPrompt=e},updateSubmitSucPrompt:function(t,e){t.submitSucPrompt=e},updateUserID:function(t,e){t.userID=e}}}),Ge=a("f309");n["a"].use(Ge["a"]);var Je=new Ge["a"]({theme:{themes:{light:{primary:"#9c27b0"},dark:{primary:"#9c27b0"}}}}),ze=a("bc3a"),He=a.n(ze),Xe=a("a7fe"),Qe=a.n(Xe),We=a("760d");n["a"].config.productionTip=!1,n["a"].use(Qe.a,He.a),n["a"].use(We["VueReCaptcha"],{siteKey:"6LduZ90UAAAAAMECSUKKXvvbJe6mFx0S-ko6q7xv"}),new n["a"]({router:Ue,store:Ke,vuetify:Je,render:function(t){return t(it)}}).$mount("#app")}});
//# sourceMappingURL=app.1eb6726d.js.map